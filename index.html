<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Light Controller API by eliotstocker</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Light Controller API</h1>
        <h2>Android Client Library For Light Controller API (Android App)</h2>
        <a href="https://github.com/eliotstocker/Light-ControllerAPI" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="light-controller-api" class="anchor" href="#light-controller-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Light Controller API</h1>

<h2>
<a id="build-status" class="anchor" href="#build-status" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build Status</h2>

<p><a href="https://travis-ci.org/eliotstocker/Light-ControllerAPI"><img src="https://travis-ci.org/eliotstocker/Light-ControllerAPI.svg?branch=master" alt="Build Status"></a></p>

<h2>
<a id="demo-application" class="anchor" href="#demo-application" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Demo application</h2>

<p>the demo application can be downloaded from google play here: <a href="https://play.google.com/store/apps/details?id=tv.piratemedia.lightcontrollerapitest&amp;hl=en_GB">LC API Example</a></p>

<p>and the code can be fount in this repo in the <a href="https://github.com/eliotstocker/Light-ControllerAPI/tree/master/example">Example Directory</a></p>

<p>it provides an example API usage as well as an example provider that simply shows a toast for each command.</p>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Description</h2>

<p>Android Client Library for <a href="https://github.com/eliotstocker/Light-Controller">Light Controller Android App</a>
allowing your application to control the lighting in a users home with ease and no need to write any socket connections etc.
along with helper classes to write providers for Light Controller to allow it to control over Light brands etc.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>Light Controller API is available on Bintray in the JCenter Repo <a href="https://bintray.com/eliotstocker/maven/LightControllerAPI/_latestVersion"> <img src="https://api.bintray.com/packages/eliotstocker/maven/LightControllerAPI/images/download.svg" alt="Download"> </a></p>

<p>The API can be added into your Gradle dependencies with the following line</p>

<div class="highlight highlight-source-groovy-gradle"><pre><span class="pl-en">dependencies</span> {
    compile <span class="pl-s"><span class="pl-pds">'</span>Light-ControllerAPI:lightcontrollerapi:1.1.+<span class="pl-pds">'</span></span>
}</pre></div>

<h2>
<a id="parts" class="anchor" href="#parts" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Parts</h2>

<ol>
<li><a href="#control-api">Light Controller Control API</a></li>
<li><a href="#provider-api">Light Controller Providers</a></li>
</ol>

<h1>
<a id="control-api" class="anchor" href="#control-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Control API</h1>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>API Usage is as follows:</p>

<ul>
<li>Add Light Controller Permission to your manifest</li>
</ul>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">uses-permission</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.api<span class="pl-pds">"</span></span>/&gt;</pre></div>

<ul>
<li>Initialize API</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">LightControllerAPI</span> api
<span class="pl-k">try</span> {
    api <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">LightControllerAPI</span>(<span class="pl-v">this</span>);
} <span class="pl-k">catch</span>(<span class="pl-smi">LightControllerException</span> e) {
    <span class="pl-k">if</span>(e<span class="pl-k">.</span>getCode() <span class="pl-k">==</span> <span class="pl-c1">TYPE_APPLICATION_MISSING</span>) {
        <span class="pl-c">//Light Controller application is not installed</span>
        <span class="pl-c">//open store to download Light Controller</span>
        <span class="pl-smi">LightControllerAPI</span><span class="pl-k">.</span>getApplicationFromPlayStore(<span class="pl-v">this</span>);
    } elseif(e<span class="pl-k">.</span>getCode() <span class="pl-k">==</span> <span class="pl-c1">TYPE_APPLICATION_OLD</span>) {
        <span class="pl-c">//Light Controller application too old</span>
        <span class="pl-c">//open store to download Latest Light Controller</span>
        <span class="pl-smi">LightControllerAPI</span><span class="pl-k">.</span>getApplicationFromPlayStore(<span class="pl-v">this</span>);
    }
}</pre></div>

<ul>
<li>Check if your application is allowed permission to control lights</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">if</span>(api<span class="pl-k">.</span>hasPermission()) {
            <span class="pl-c">//application has permission</span>
} <span class="pl-k">else</span> {
    <span class="pl-c">//app doesnt have permission, set event for if any permissions change on the api</span>
    api<span class="pl-k">.</span>setOnPermissionChanged(<span class="pl-k">new</span> <span class="pl-smi">OnPermissionChanged</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onChange</span>() {
            <span class="pl-c">//still need to check if your app has permission as this is called on any app permission change</span>
            <span class="pl-k">if</span>(api<span class="pl-k">.</span>hasPermission()) {
                perms<span class="pl-k">.</span>setVisibility(<span class="pl-smi">View</span><span class="pl-c1"><span class="pl-k">.</span>GONE</span>);
            }
        }
    });
}</pre></div>

<p>It is not explicityly required that an app must request permission as sending a command (such as light on) will result in a permission request being sent,
however it is best use that in any app with a main activity that permissions are requested and checked on create or resume so as to avoid user confusion.
The Command usage for example does not explicitly request permission, thus on first use a permission requested be be sent.</p>

<ul>
<li>Select Zone the user wishes to control
there are multiple ways to do this</li>
</ul>

<p>1: using the Zone List Picker</p>

<div class="highlight highlight-source-java"><pre>api<span class="pl-k">.</span>pickZone();

<span class="pl-c">//register Activity Result Listener withing your activity, required to get the return from the pick activity</span>
<span class="pl-k">@Override</span>
<span class="pl-k">protected</span> <span class="pl-k">void</span> onActivityResult(<span class="pl-k">int</span> requestCode, <span class="pl-k">int</span> resultCode, <span class="pl-smi">Intent</span> data) {
    <span class="pl-k">if</span>(requestCode <span class="pl-k">==</span> <span class="pl-smi">LightControllerAPI</span><span class="pl-k">.</span><span class="pl-smi">PickRequestCode</span>) {
        <span class="pl-k">if</span>(resultCode <span class="pl-k">==</span> <span class="pl-c1">RESULT_OK</span>) {
            <span class="pl-c">//save zone for later use</span>
            <span class="pl-smi">Zone</span> <span class="pl-k">=</span> (<span class="pl-smi">LightZone</span>)data<span class="pl-k">.</span>getSerializableExtra(<span class="pl-s"><span class="pl-pds">"</span>LightZone<span class="pl-pds">"</span></span>);
            <span class="pl-c">//show user selected zone</span>
            selected<span class="pl-k">.</span>setText(<span class="pl-smi">Character</span><span class="pl-k">.</span>toUpperCase(<span class="pl-smi">Zone</span><span class="pl-k">.</span><span class="pl-smi">Type</span><span class="pl-k">.</span>charAt(<span class="pl-c1">0</span>)) <span class="pl-k">+</span> <span class="pl-smi">Zone</span><span class="pl-k">.</span><span class="pl-smi">Type</span><span class="pl-k">.</span>substring(<span class="pl-c1">1</span>) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">Zone</span><span class="pl-k">.</span><span class="pl-smi">Name</span>);
        } <span class="pl-k">else</span> <span class="pl-k">if</span>(resultCode <span class="pl-k">==</span> <span class="pl-c1">RESULT_CANCELED</span>) {
            <span class="pl-c">//picker was closed without picking</span>
        }
    }
}</pre></div>

<p>2: using LightZone List API</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">LightZone</span>[] zoneList <span class="pl-k">=</span> api<span class="pl-k">.</span>listZones();

<span class="pl-k">for</span>(<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> zoneList<span class="pl-k">.</span>length; i<span class="pl-k">++</span>) {
    <span class="pl-smi">LightZone</span> zone <span class="pl-k">=</span> zoneList[i];
    <span class="pl-smi">Log</span><span class="pl-k">.</span>d(<span class="pl-s"><span class="pl-pds">"</span>Zone<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Name: <span class="pl-pds">"</span></span><span class="pl-k">+</span><span class="pl-smi">zone<span class="pl-k">.</span>Name</span><span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span> Type: <span class="pl-pds">"</span></span><span class="pl-k">+</span><span class="pl-smi">zone<span class="pl-k">.</span>Type</span>);

    <span class="pl-c">//do what ever you like with the zones here (add to listView perhapse)</span>
}</pre></div>

<ul>
<li>Now you have the zones you can start to control the zones like the following</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-c">//zone1 is a LightZone returned from either Zone List</span>
api<span class="pl-k">.</span>lightsOn(zone1);</pre></div>

<p>if you wish your application to show up in the navigation menu in the Light Controller
application you must register an activity with the category 'tv.piratemedia.lightcontroller.plugin'</p>

<p>it is also recommended that you allow the user to remove the launcher icon when accessing your plugin
from light controller, however this is only the best case if the application works mainly as a plugin
for Light Controller rather than a stand alone app.</p>

<p>you can see a simple method for achieving this in the example application.</p>

<h2>
<a id="api-documentation" class="anchor" href="#api-documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API Documentation</h2>

<p>Methods:</p>

<table>
<thead>
<tr>
<th align="left">Return Type</th>
<th align="left">Invocation</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"></td>
<td align="left">LightControllerAPI(Context context)</td>
<td align="left">Class constructor you must pass it your applications context for it to call the intents from, Throws a LightControllerException if The application is not installed or The Application version is to old to support this version of the API Client</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">getApplicationFromPlayStore(Context context)</td>
<td align="left">(Static) Will bring the user to the play store where they can or update download light controller if needed.</td>
</tr>
<tr>
<td align="left">Boolean</td>
<td align="left">isLightControllerInstalled()</td>
<td align="left">Return (Boolean) weather Light Controller Application is installed, should not need to be used as is called from the class constructor.</td>
</tr>
<tr>
<td align="left">LightZone[]</td>
<td align="left">listZones()</td>
<td align="left">Returns an array of all available Light Zones as LightZone Objects</td>
</tr>
<tr>
<td align="left">LightZone</td>
<td align="left">getZone(int Zone, String Type)</td>
<td align="left">Will return the Light Zone Object for the specified zone, accepted values for Type are LightControllerAPI.LIGHT_TYPE_COLOR and LightControllerAPI.LIGHT_TYPE_WHITE</td>
</tr>
<tr>
<td align="left">Boolean</td>
<td align="left">hasPermission()</td>
<td align="left">Returns (boolean) weather your application has permission to use the Light Controller API</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">RequiestPermission()</td>
<td align="left">Request Permission to use the Light Controller API, this will create in interactive prompt for the user to allow to deny your app, use setOnPermissionChanged to listen for changes to your Permission Status</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">setOnPermissionChanged(OnPermissionChanged oPC)</td>
<td align="left">Set a class that implements OnPermissionChanged where the onChange() Function is called when the application is granted/rescinded permission to access the Light Controller API</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">lightsOn(LightZone lz)</td>
<td align="left">Turn lights on for LightZone returned from listZones() or getZone(), you should not construct a LightZone Object for this.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">lightsOn(int Zone, String Type)</td>
<td align="left">Turn on lights for the numbered zone of the type specified, accepted values for Type are LightControllerAPI.LIGHT_TYPE_COLOR and LightControllerAPI.LIGHT_TYPE_WHITE.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">lightsOff(LightZone lz)</td>
<td align="left">Turn lights off for a LightZone Object returned from listZones() or getZone(), you should not construct a LightZone Object for this.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">lightsOff(int Zone, String Type)</td>
<td align="left">Turn off lights for the numbered zone of the type specified, accepted values for Type are LightControllerAPI.LIGHT_TYPE_COLOR and LightControllerAPI.LIGHT_TYPE_WHITE.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">setColor(LightZone lz, int Color)</td>
<td align="left">Set Lights to specified color (For Colored Light Only Dummy!) for LightZone Object returned from listZones() or getZone(), Color Should be a color integer return from the Color class.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">setColor(int Zone, String Type, int Color)</td>
<td align="left">Set Lights to specified color (For Colored Light Only Dummy!) for the numbered zone of the type specified, Color Should be a color integer return from the Color class.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">setDefault(LightZone lz)</td>
<td align="left">Set Colored Zone Lights to White, and White Zone Lights to Full Brightness for a LightZone Object returned from listZones() or getZone().</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">setDefault(int Zone, String Type)</td>
<td align="left">Set Colored Zone Lights to White, and White Zone Lights to Full Brightness for for the numbered zone of the type specified.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">startFadeIn(LightZone lz, int duration)</td>
<td align="left">Starts the lights lowly getting brighter from the lowest setting over the duration (in seconds) specified for a LightZone Object returned from listZones() or getZone(), Vaules from 30 to 900 are allowed, throws a LightControllerException if the values are outside to the acceptable range.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">startFadeIn(int Zone, String Type, int duration)</td>
<td align="left">Starts the lights lowly getting brighter from the lowest setting over the duration (in seconds) specified for a the numbered zone of the type specified, Vaules from 30 to 900 are allowed, throws a LightControllerException if the values are outside to the acceptable range.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">startFadeOut(LightZone lz, int duration)</td>
<td align="left">Starts the lights lowly getting brighter from the highest setting over the duration (in seconds) specified for a LightZone Object returned from listZones() or getZone(), Vaules from 30 to 900 are allowed, throws a LightControllerException if the values are outside to the acceptable range.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">startFadeOut(int Zone, String Type, int duration)</td>
<td align="left">Starts the lights lowly getting darker from the highest setting over the duration (in seconds) specified for a the numbered zone of the type specified, Vaules from 30 to 900 are allowed, throws a LightControllerException if the values are outside to the acceptable range.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">cancelFade()</td>
<td align="left">Cancels and fade currently in transition on any zone</td>
</tr>
<tr>
<td align="left">String</td>
<td align="left">getZoneName(int Zone, String Type)</td>
<td align="left">Returns the Name saved in Light Controller for the number zone of the specified type, accepted values for Type are LightControllerAPI.LIGHT_TYPE_COLOR and LightControllerAPI.LIGHT_TYPE_WHITE.</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">pickZone()</td>
<td align="left">Brings forward an interactive dialog withing which users may select a zone to control. The Light Zone Object can be caught from the activity response in the calling activity using onActivityResult, by getting the LightZone Extra as Follows: (LightZone)data.getSerializableExtra("LightZone")</td>
</tr>
</tbody>
</table>

<p>Properties:</p>

<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">int</td>
<td align="left">PickRequestCode</td>
<td align="left">this is the request code of the pickZone() dialog so as you may catch this particular Activity response</td>
</tr>
<tr>
<td align="left">String</td>
<td align="left">LightControllerPackage</td>
<td align="left">the Light Controller Package Name should you require it.</td>
</tr>
<tr>
<td align="left">String</td>
<td align="left">LIGHT_TYPE_COLOR</td>
<td align="left">Colored Lights LightZone type value, to be used with functions such as LightsOn etc.</td>
</tr>
<tr>
<td align="left">String</td>
<td align="left">LIGHT_TYPE_WHITE</td>
<td align="left">White Lights LightZone type value, to be used with functions such as LightsOn etc.</td>
</tr>
</tbody>
</table>

<p>Exception:
Some Functions will throw a LightControllerException which you can catch and inspect the Code to know why the Exception was thrown, for example if the installed version of Light Controller is too old, when constructing the LightControllerAPI Class the Code will be Equal to LightControllerException.TYPE_APPLICATION_OLD the known Codes are as follows:</p>

<ul>
<li>TYPE_APPLICATION_MISSING: The Light Controller application is not installed, call the getApplicationFromPlayStore method to show the user the play store page.</li>
<li>TYPE_APPLICATION_OLD: The Light Controller application is installed, but too old to be used with this version of the API client library, call the getApplicationFromPlayStore method to show the user the play store page.</li>
<li>TYPE_ZONE_TYPE_INCORRECT: The Type String specified to a method such as lightsOn width not and accepted value</li>
<li>TYPE_VALUE_OUT_OF_RANGE: The Value specified for a fade Method such as startFadeOut was outside of the accepted range</li>
</ul>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<p>a simple example of the API can be found here: <a href="https://github.com/eliotstocker/Light-ControllerAPI/tree/master/example">API Example</a></p>

<h1>
<a id="provider-api" class="anchor" href="#provider-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Provider API</h1>

<p>The Provider API is currently in preview, and as such only works with Beta Releases of Light Controller, it should be considered a Beta and subject to some small changes or additions</p>

<h2>
<a id="usage-1" class="anchor" href="#usage-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Inover to create a provider you must create a class extending ControlProviderReciever you will see that a number of functions are needed and they are quite self explainitory, further info on the functions required are listed bellow.</p>

<p>you must also register the reciever and setup intent filter as follow:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">receiver</span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>{class that extends ControlProviderReciever}<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">label</span>=<span class="pl-s"><span class="pl-pds">"</span>{Title that shows up fro users when in select dialog}<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">exported</span>=<span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">enabled</span>=<span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.Select<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.LightOn<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.LightOff<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.GlobalOn<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.GlobalOff<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.Brightness<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.IncreaseBrightness<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.DecreaseBrightness<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.LightColor<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.Temperature<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.IncreaseTemperature<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.DecreaseTemperature<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.LightNight<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.LightFull<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">intent-filter</span>&gt;
    &lt;<span class="pl-ent">category</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">action</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider.LightWhite<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">intent-filter</span>&gt;
&lt;<span class="pl-ent">meta-data</span>
        <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>tv.piratemedia.lightcontroler.provider<span class="pl-pds">"</span></span>
        <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">resource</span>=<span class="pl-s"><span class="pl-pds">"</span>@xml/provider_info<span class="pl-pds">"</span></span> /&gt;
&lt;/<span class="pl-ent">receiver</span>&gt;</pre></div>

<p>at the end of the reciever example adove you can see that thre is a metadata field called "tv.piratemedia.lightcontroler.provider" this provides Light Controller with some information about how your reciever works</p>

<p>an example of metadata XML:</p>

<div class="highlight highlight-text-xml"><pre>&lt;?<span class="pl-ent">xml</span><span class="pl-e"> version</span>=<span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span><span class="pl-e"> encoding</span>=<span class="pl-s"><span class="pl-pds">"</span>utf-8<span class="pl-pds">"</span></span>?&gt;
&lt;<span class="pl-ent">control-provider</span> <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">android</span>=<span class="pl-s"><span class="pl-pds">"</span>http://schemas.android.com/apk/res/android<span class="pl-pds">"</span></span>
                  <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">app</span>=<span class="pl-s"><span class="pl-pds">"</span>http://schemas.android.com/apk/res-auto<span class="pl-pds">"</span></span>
                  <span class="pl-e">app</span><span class="pl-e">:</span><span class="pl-e">ColorBrightnessStatefull</span>=<span class="pl-s"><span class="pl-pds">"</span>false<span class="pl-pds">"</span></span>
                  <span class="pl-e">app</span><span class="pl-e">:</span><span class="pl-e">WhiteBrightnessStatefull</span>=<span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span>
                  <span class="pl-e">app</span><span class="pl-e">:</span><span class="pl-e">ColorHasTemperature</span>=<span class="pl-s"><span class="pl-pds">"</span>false<span class="pl-pds">"</span></span>
                  <span class="pl-e">app</span><span class="pl-e">:</span><span class="pl-e">ColorTemperatureStatefull</span>=<span class="pl-s"><span class="pl-pds">"</span>false<span class="pl-pds">"</span></span>
                  <span class="pl-e">app</span><span class="pl-e">:</span><span class="pl-e">WhiteTemperatureStatefull</span>=<span class="pl-s"><span class="pl-pds">"</span>false<span class="pl-pds">"</span></span>&gt;
&lt;/<span class="pl-ent">control-provider</span>&gt;</pre></div>

<p>this must be present for LightController to be able to load your provider</p>

<h2>
<a id="security" class="anchor" href="#security" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Security</h2>

<p>ControlProviderReciever has a security mechanism where by it will check the calling applications package name and signature to make sure that not just any application can use your provider.</p>

<p>if you wish to enable other applications to use you package you can add their signature and package name in your Providers construction class like so:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">private</span> <span class="pl-k">static</span> appPermission[] ap <span class="pl-k">=</span> {<span class="pl-k">new</span> appPermission(<span class="pl-s"><span class="pl-pds">"</span>com.example.package<span class="pl-pds">"</span></span>, <span class="pl-c1">123456789</span>)};
<span class="pl-k">public</span> ExampleProvider() {
    <span class="pl-v">super</span>(ap);
}</pre></div>

<p>where 'com.example.package' is the package name and 123456789 is the hashCode of the applications signature, thjis application must of course implement calling the provider in a similar way to Light Controller</p>

<h2>
<a id="selection" class="anchor" href="#selection" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Selection</h2>

<p>most of the provider base functions are simply for the use of controlling the lights, however onSelected is a utility function that is called when a user selects your provider,
this can be left empty safely if no setup is required, however if you wish to display an activity to present the user with some options or information you can do so like so:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@Override</span>
<span class="pl-k">public</span> <span class="pl-k">void</span> onSelected(<span class="pl-smi">Context</span> context) {
    <span class="pl-smi">Intent</span> i <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Intent</span>(context, <span class="pl-smi">ProviderSelected</span><span class="pl-k">.</span>class);
    i<span class="pl-k">.</span>addFlags(<span class="pl-smi">Intent</span><span class="pl-c1"><span class="pl-k">.</span>FLAG_ACTIVITY_NEW_TASK</span>);
    context<span class="pl-k">.</span>startActivity(i);
}</pre></div>

<h2>
<a id="provider-documentation" class="anchor" href="#provider-documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Provider Documentation</h2>

<p>Methods to override in ControlProviderReciver:</p>

<table>
<thead>
<tr>
<th align="left">Return Type</th>
<th align="left">Method Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Void</td>
<td align="left">onSelected(Context context)</td>
<td align="left">(Optional) On Selected callback, not required, allows you to run some code when the user selects your provider</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onLightsOn(int Type, int Zone, Context context)</td>
<td align="left">When the user toggles a light on for a zone in the interface, run your code here to turn off the light</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onLightsOff(int Type, int Zone, Context context)</td>
<td align="left">When the user toggles a light off for a zone in the interface, run your code here to turn off the light</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onGlobalOn(Context context)</td>
<td align="left">Turn on all Lights for All zones of all Types</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onGlobalOff(Context context)</td>
<td align="left">Turn off all Lights for All zones of all Types</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onSetBrightness(int Type, int Zone, float Brightness, Context context)</td>
<td align="left">Set a Zones brightness when either 'ColorBrightnessStatefull' or 'WhiteBrightnessStatefull' are set to true the float value is between 0 and 1 where 1 is full brightness and 0 is the lowest</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onIncreaseBrightness(int Type, int Zone, Context context)</td>
<td align="left">Increase a Zones brightness by one step when either 'ColorBrightnessStatefull' or 'WhiteBrightnessStatefull' are set to false</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onDecreaseBrightness(int Type, int Zone, Context context)</td>
<td align="left">Decrease a Zones brightness by one step when either 'ColorBrightnessStatefull' or 'WhiteBrightnessStatefull' are set to false</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onSetColor(int Zone, int color, Context context)</td>
<td align="left">callback to set a zones color, the integer passed in is a standard color code, no type is sent for this as it is expected to be a Color Zone</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onSetTemperature(int Type, int Zone, float Temp, Context context)</td>
<td align="left">Set a Zones temperature when either 'ColorTemperatureStatefull' or 'WhiteTemperatureStatefull' are set to true the float value is between -1 and 1 where 1 is warmest and -1 is the coolest</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onIncreaseTemperature(int Type, int Zone, Context context)</td>
<td align="left">Increase a Zones color temperature by one step when either 'ColorTemperatureStatefull' or 'WhiteTemperatureStatefull' are set to false</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onDecreaseTemperature(int Type, int Zone, Context context)</td>
<td align="left">Decrease a Zones color temperature by one step when either 'ColorTemperatureStatefull' or 'WhiteTemperatureStatefull' are set to false</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onSetNight(int Type, int Zone, Context context)</td>
<td align="left">Set Zone specified to night mode</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onSetFull(int Type, int Zone, Context context)</td>
<td align="left">Set Zone specified to full brightness</td>
</tr>
<tr>
<td align="left">Void</td>
<td align="left">onSetWhite(int Zone, Context context)</td>
<td align="left">Set a (Color) Zone back to white</td>
</tr>
</tbody>
</table>

<h2>
<a id="zones-and-types" class="anchor" href="#zones-and-types" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Zones and Types</h2>

<p>all types are sent with one of the following static values ControlProviderReceiver.ZONE_TYPE_COLOR, ControlProviderReceiver.ZONE_TYPE_WHITE or ControlProviderReceiver.ZONE_TYPE_UNKNOWN in the unlikely even the zone is not known</p>

<p>all zones will be integers from 0 to 4, with 0 being global (all zones of that type) and 1 to 4 being zones 1 to 4 respectively.</p>

<p>the global commands (on/off) should turn off oll lights of all types</p>

<h2>
<a id="example-1" class="anchor" href="#example-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<p>a simple example provider of the API can be found here: <a href="https://github.com/eliotstocker/Light-ControllerAPI/tree/master/example/scr/main/java/tv/piratemedia/lightcontrollerexample/ExampleProvider">Example Provider</a></p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>Light Controller API is free for use or modify as to allow any application to interface with Light Controller using the Apache 2.0 License</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/eliotstocker/Light-ControllerAPI/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/eliotstocker/Light-ControllerAPI/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/eliotstocker/Light-ControllerAPI"></a> is maintained by <a href="https://github.com/eliotstocker">eliotstocker</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
